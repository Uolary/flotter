!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("flotter",[],t):"object"==typeof exports?exports.flotter=t():e.flotter=t()}(window,function(){return o={},r.m=n=[function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n(1);var i="flotter",c={content:i+"__content",popup:i+"__popup",popupOpen:i+"__popup_open",rectangle:i+"__rectangle",title:i+"__title",quentin:i+"__title_quentin",watchNow:i+"__watch-now",backgroundDark:i+"__background_dark",player:i+"__player",iframePlayer:i+"__iframe-player",close:i+"-close",closeIcon:i+"-close__icon"},a={className:"flotter",youtubeUrl:"",backgroundImage:"",titleText:""},o=(o(s,[{key:"_simpleOptions",value:function(e,t){var n,o,r,i={};for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);for(o in t)t.hasOwnProperty(o)&&("className"!==o?i[o]=t[o]:((r=t[o].split(" ")).push(this.options.className),i[o]=r.join(" ")));return i}},{key:"_createContainer",value:function(){var e=document.createElement("div");return e.setAttribute("class",i),e.insertAdjacentElement("beforeend",this.popupContent),e.insertAdjacentElement("beforeend",this.popup),e}},{key:"_createContentPopup",value:function(){var t=document.createElement("div"),e=[this._createRectangle(),this._createTitle(),this.watchNowBtn];return t.setAttribute("class",c.content),e.forEach(function(e){t.insertAdjacentElement("beforeend",e)}),t}},{key:"_createRectangle",value:function(){var e=document.createElement("div");return e.classList.add(c.rectangle),e}},{key:"_createTitle",value:function(){var e=this.options.titleText.replace("<quentin>",'<span class="'+c.quentin+'">').replace("</quentin>","</span>"),t=document.createElement("div");return t.classList.add(c.title),t.insertAdjacentHTML("beforeend",e),t}},{key:"_createWatchNowBtn",value:function(){var e=document.createElement("button");return e.classList.add(c.watchNow),e.setAttribute("type","button"),e.setAttribute("title","Open popup"),e.insertAdjacentHTML("beforeend",'\n      <svg width="41" height="30" viewBox="0 0 41 30" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M16.4002 21.4289V8.57112L27.0514 15.0005L16.4002 21.4289ZM40.1437 4.68482C39.6715 2.84149 38.2827 1.38874 36.5183 0.89617C33.3215 0 20.5 0 20.5 0C20.5 0 7.67959 0 4.48175 0.89617C2.71728 1.38874 1.32854 2.84149 0.857324 4.68482C0 8.02647 0 15.0005 0 15.0005C0 15.0005 0 21.9735 0.857324 25.3163C1.32854 27.1596 2.71728 28.6123 4.48175 29.1049C7.67959 30 20.5 30 20.5 30C20.5 30 33.3215 30 36.5183 29.1049C38.2827 28.6123 39.6715 27.1596 40.1437 25.3163C41 21.9735 41 15.0005 41 15.0005C41 15.0005 41 8.02647 40.1437 4.68482Z" fill="#FFDF37"/>\n      </svg>'),e}},{key:"_createPopup",value:function(){var e=document.createElement("div");return e.classList.add(c.popup),e.setAttribute("aria-modal","true"),e.setAttribute("role","dialog"),e.insertAdjacentElement("beforeend",this._createBackgroundDark()),e.insertAdjacentElement("beforeend",this._createPlayer()),e}},{key:"_createBackgroundDark",value:function(){var e=document.createElement("div");return e.classList.add(c.backgroundDark),e}},{key:"_createPlayer",value:function(){var e=document.createElement("div"),t=document.createElement("iframe"),n=void 0;try{var o=new URL(this.options.youtubeUrl).search,n=new URLSearchParams(o)}catch(e){n=new URLSearchParams("?v=")}return e.classList.add(c.player),t.classList.add(c.iframePlayer),t.setAttribute("title","YouTube video player"),t.setAttribute("frameborder","0"),t.setAttribute("allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),t.setAttribute("allowfullscreen",""),t.setAttribute("src","https://www.youtube.com/embed/"+n.get("v")),e.insertAdjacentElement("beforeend",this.closePopupBtn),e.insertAdjacentElement("beforeend",t),e}},{key:"_createPopupCloseBtn",value:function(){var e=document.createElement("button"),t=document.createElement("span");return e.classList.add(c.close),e.setAttribute("type","button"),e.setAttribute("title","Close popup"),e.setAttribute("aria-label","Close"),t.classList.add(c.closeIcon),e.insertAdjacentElement("beforeend",t),e}},{key:"_insertWrapPopup",value:function(){this.element.setAttribute("id",this.id),this.element.insertAdjacentElement("beforeend",this.container),this.offsetTop=this.element.getBoundingClientRect().top+document.body.scrollTop}},{key:"_init",value:function(){this.onInit&&"function"==typeof this.onInit&&this.onInit()}}],[{key:"init",value:function(e,t){this.createInstance(e,t),s.eventsActivated||(s.eventsActivated=!0,this.addEvents())}},{key:"destroy",value:function(t){var n=t.id;s.instances=s.instances.filter(function(e){return e.id!==n||(t.removeAttribute("id"),void t.removeChild(e.container))}),s.instances.length||(s.eventsActivated=!1,this.removeEvents()),s.isOpenPopUp=!1}},{key:"createInstance",value:function(e,t){var n=e[i];n||(n=new s(e,t),e[i]=n)}},{key:"addEvents",value:function(){document.addEventListener("click",this.eventDocumentClick),document.addEventListener("keyup",this.eventDocumentKeyUp),window.addEventListener("scroll",this.eventScroll),window.addEventListener("resize",this.eventResize),document.addEventListener("DOMContentLoaded",this.eventCheckBackground)}},{key:"removeEvents",value:function(){document.removeEventListener("click",this.eventDocumentClick),document.removeEventListener("keyup",this.eventDocumentKeyUp),window.removeEventListener("scroll",this.eventScroll),window.removeEventListener("resize",this.eventResize),document.removeEventListener("DOMContentLoaded",this.eventCheckBackground)}},{key:"eventDocumentClick",value:function(e){var t=e.target,e=t.closest('[id^="flotter-"]');e&&(e=document.querySelector("#"+e.id).querySelector("."+c.popup),t.closest("."+c.watchNow)&&(e.classList.add(c.popupOpen),s.windowSize={y:window.pageYOffset,x:window.pageXOffset},s.isOpenPopUp=!0),t.closest("."+c.close)&&(e.classList.remove(c.popupOpen),s.isOpenPopUp=!1))}},{key:"eventDocumentKeyUp",value:function(e){var t=document.activeElement,n=document.querySelectorAll("."+c.popup);t.closest("."+c.popupOpen)||n.forEach(function(e){e.classList.contains(c.popupOpen)&&e.querySelector("."+c.close).focus()}),"key"in e&&"Escape"===e.key&&n.forEach(function(e){e.classList.contains(c.popupOpen)&&(e.classList.remove(c.popupOpen),s.isOpenPopUp=!1)})}},{key:"eventScroll",value:function(){s.eventCheckBackground(),s.isOpenPopUp&&window.scrollTo(s.windowSize.x,s.windowSize.y)}},{key:"eventResize",value:function(){s.instances.forEach(function(e){e.offsetTop=e.element.getBoundingClientRect().top+document.body.scrollTop})}},{key:"eventCheckBackground",value:function(){s.instances.forEach(function(e){window.pageYOffset+window.innerHeight/2>e.offsetTop&&!e.loadBackground&&(document.querySelector("#"+e.id).querySelector("."+i).style.backgroundImage="url("+e.options.backgroundImage+")",e.loadBackground=!0)})}}]),s);function s(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.id="flotter-"+(new Date).valueOf(),this.offsetTop=0,this.loadBackground=!1,this.element=e,this.options=this._simpleOptions(a,t),this.onInit=this.options.onInit,this.watchNowBtn=this._createWatchNowBtn(),this.closePopupBtn=this._createPopupCloseBtn(),this.popupContent=this._createContentPopup(),this.popup=this._createPopup(),this.container=this._createContainer(),s.instances.push(this),this._insertWrapPopup(),this._init()}(t.default=o).version="1.0.0",o.instances=[],o.eventsActivated=!1,o.isOpenPopUp=!1,e.exports=t.default},function(e,t,n){}],r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0);function r(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}var n,o});